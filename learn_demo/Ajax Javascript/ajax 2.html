<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>


    <script>
        /*
         处理兼容性

         */

        window.onload = function () {
            var btn = document.getElementById("btn");

            btn.onclick = function () {
                var info = null;
                try {
                    //代码尝试执行这个块中的内容，若有错，则会执行catch{}，并传入一个错误信息，不会终止代码运行
                    //throw new Error();//手动去抛一个错
                    info = new XMLHttpRequest();
                } catch (e) {
                    try {
                        info = new ActiveXObject("Msxml2.XMLHTTP");
                    }catch (e){
                        info = new ActiveXObject("Microsoft.XMLHTTP");    
                    }
                    
                }
                /*
                 open(1，2，3)方法，
                 1、方法：
                 2、地址：
                 3、是否异步（非阻塞，不阻止后面代码的运行），什么时候用同步，要与前面内容挂钩

                 表单是用于数据提交,enctype数据格式
                 <form enctype="application/">
                 */
                info.open("get", "1.txt", true);
                /*



                 */
                info.send();
                /*
                 等到数据取完后
                 readyState:ajax工作状态,0(默认),1(正在发送),2(发送完毕,并收到内容),3(解析内容),4(解析完成)
                 responseText()字符串，responseXML()XML数据格式
                 onreadystatechange：当状态值改变时触发（触发多次）
                 status:服务器状态(http状态码),200成功,404错误，有三大类：1消息类，2成功类，3重定向，4错误，

                 */
                info.onreadystatechange = function () {
                    var state = info.readyState;
                    if (state == 1) {
                        alert("正在发送");
                    } else if (state == 2) {
                        alert("发送完毕");
                    } else if (state == 3) {
                        alert("解析完成");
                    } else if (state == 4) {
                        if (info.status == 200) {
                            //info.responseText都是字符串
                            alert(info.responseText);
                        }else{
                            alert("出现错误了！！！");
                        }
                    }
                    //做一下错误处理


                }

            }


        }


    </script>


</head>


<body>

<input type="button" id="btn" value="按钮"/>

</body>
</html>